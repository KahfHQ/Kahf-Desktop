var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __name = (target, value) => __defProp(target, "name", { value, configurable: true });
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target, mod));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var composer_exports = {};
__export(composer_exports, {
  actions: () => actions,
  getEmptyState: () => getEmptyState,
  reducer: () => reducer
});
module.exports = __toCommonJS(composer_exports);
var log = __toESM(require("../../logging/log"));
var import_assignWithNoUnnecessaryAllocation = require("../../util/assignWithNoUnnecessaryAllocation");
var import_linkPreviews = require("./linkPreviews");
var import_writeDraftAttachment = require("../../util/writeDraftAttachment");
var import_deleteDraftAttachment = require("../../util/deleteDraftAttachment");
var import_replaceIndex = require("../../util/replaceIndex");
var import_resolveDraftAttachmentOnDisk = require("../../util/resolveDraftAttachmentOnDisk");
var import_handleAttachmentsProcessing = require("../../util/handleAttachmentsProcessing");
var import_LinkPreview = require("../../types/LinkPreview");
const ADD_PENDING_ATTACHMENT = "composer/ADD_PENDING_ATTACHMENT";
const REPLACE_ATTACHMENTS = "composer/REPLACE_ATTACHMENTS";
const RESET_COMPOSER = "composer/RESET_COMPOSER";
const SET_HIGH_QUALITY_SETTING = "composer/SET_HIGH_QUALITY_SETTING";
const SET_QUOTED_MESSAGE = "composer/SET_QUOTED_MESSAGE";
const actions = {
  addAttachment,
  addPendingAttachment,
  processAttachments,
  removeAttachment,
  replaceAttachments,
  resetComposer,
  setMediaQualitySetting,
  setQuotedMessage
};
function getAttachmentsFromConversationModel(conversationId) {
  const conversation = window.ConversationController.get(conversationId);
  return conversation?.get("draftAttachments") || [];
}
function addAttachment(conversationId, attachment) {
  return async (dispatch, getState) => {
    const onDisk = await (0, import_writeDraftAttachment.writeDraftAttachment)(attachment);
    const isSelectedConversation = getState().conversations.selectedConversationId === conversationId;
    const draftAttachments = isSelectedConversation ? getState().composer.attachments : getAttachmentsFromConversationModel(conversationId);
    const hasDraftAttachmentPending = draftAttachments.some((draftAttachment) => draftAttachment.path === attachment.path);
    if (!hasDraftAttachmentPending) {
      await (0, import_deleteDraftAttachment.deleteDraftAttachment)(onDisk);
      return;
    }
    const index = draftAttachments.findIndex((draftAttachment) => draftAttachment.path === attachment.path);
    let nextAttachments = draftAttachments;
    if (index < 0) {
      log.warn(`addAttachment: Failed to find pending attachment with path ${attachment.path}`);
      nextAttachments = [...draftAttachments, onDisk];
    } else {
      nextAttachments = (0, import_replaceIndex.replaceIndex)(draftAttachments, index, onDisk);
    }
    replaceAttachments(conversationId, nextAttachments)(dispatch, getState, null);
    const conversation = window.ConversationController.get(conversationId);
    if (conversation) {
      conversation.attributes.draftAttachments = nextAttachments;
      window.Signal.Data.updateConversation(conversation.attributes);
    }
  };
}
function addPendingAttachment(conversationId, pendingAttachment) {
  return (dispatch, getState) => {
    const isSelectedConversation = getState().conversations.selectedConversationId === conversationId;
    const draftAttachments = isSelectedConversation ? getState().composer.attachments : getAttachmentsFromConversationModel(conversationId);
    const nextAttachments = [...draftAttachments, pendingAttachment];
    dispatch({
      type: REPLACE_ATTACHMENTS,
      payload: nextAttachments
    });
    const conversation = window.ConversationController.get(conversationId);
    if (conversation) {
      conversation.attributes.draftAttachments = nextAttachments;
      window.Signal.Data.updateConversation(conversation.attributes);
    }
  };
}
function processAttachments(options) {
  return async (dispatch) => {
    await (0, import_handleAttachmentsProcessing.handleAttachmentsProcessing)(options);
    dispatch({
      type: "NOOP",
      payload: null
    });
  };
}
function removeAttachment(conversationId, filePath) {
  return async (dispatch, getState) => {
    const { attachments } = getState().composer;
    const [targetAttachment] = attachments.filter((attachment) => attachment.path === filePath);
    if (!targetAttachment) {
      return;
    }
    const nextAttachments = attachments.filter((attachment) => attachment.path !== filePath);
    const conversation = window.ConversationController.get(conversationId);
    if (conversation) {
      conversation.attributes.draftAttachments = nextAttachments;
      conversation.attributes.draftChanged = true;
      window.Signal.Data.updateConversation(conversation.attributes);
    }
    replaceAttachments(conversationId, nextAttachments)(dispatch, getState, null);
    if (targetAttachment.path && targetAttachment.fileName !== targetAttachment.path) {
      await (0, import_deleteDraftAttachment.deleteDraftAttachment)(targetAttachment);
    }
  };
}
function replaceAttachments(conversationId, attachments) {
  return (dispatch, getState) => {
    if (getState().conversations.selectedConversationId !== conversationId) {
      return;
    }
    dispatch({
      type: REPLACE_ATTACHMENTS,
      payload: attachments.map(import_resolveDraftAttachmentOnDisk.resolveDraftAttachmentOnDisk)
    });
  };
}
function resetComposer() {
  return {
    type: RESET_COMPOSER
  };
}
function setMediaQualitySetting(payload) {
  return {
    type: SET_HIGH_QUALITY_SETTING,
    payload
  };
}
function setQuotedMessage(payload) {
  return {
    type: SET_QUOTED_MESSAGE,
    payload
  };
}
function getEmptyState() {
  return {
    attachments: [],
    linkPreviewLoading: false,
    shouldSendHighQualityAttachments: false
  };
}
function reducer(state = getEmptyState(), action) {
  if (action.type === RESET_COMPOSER) {
    return getEmptyState();
  }
  if (action.type === REPLACE_ATTACHMENTS) {
    const { payload: attachments } = action;
    return {
      ...state,
      attachments,
      ...attachments.length ? {} : { shouldSendHighQualityAttachments: false }
    };
  }
  if (action.type === SET_HIGH_QUALITY_SETTING) {
    return {
      ...state,
      shouldSendHighQualityAttachments: action.payload
    };
  }
  if (action.type === SET_QUOTED_MESSAGE) {
    return {
      ...state,
      quotedMessage: action.payload
    };
  }
  if (action.type === import_linkPreviews.ADD_PREVIEW) {
    if (action.payload.source !== import_LinkPreview.LinkPreviewSourceType.Composer) {
      return state;
    }
    return {
      ...state,
      linkPreviewLoading: true,
      linkPreviewResult: action.payload.linkPreview
    };
  }
  if (action.type === import_linkPreviews.REMOVE_PREVIEW) {
    return (0, import_assignWithNoUnnecessaryAllocation.assignWithNoUnnecessaryAllocation)(state, {
      linkPreviewLoading: false,
      linkPreviewResult: void 0
    });
  }
  if (action.type === ADD_PENDING_ATTACHMENT) {
    return {
      ...state,
      attachments: [...state.attachments, action.payload]
    };
  }
  return state;
}
// Annotate the CommonJS export names for ESM import in node:
0 && (module.exports = {
  actions,
  getEmptyState,
  reducer
});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiY29tcG9zZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8vIENvcHlyaWdodCAyMDIxIFNpZ25hbCBNZXNzZW5nZXIsIExMQ1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFHUEwtMy4wLW9ubHlcblxuaW1wb3J0IHR5cGUgeyBUaHVua0FjdGlvbiB9IGZyb20gJ3JlZHV4LXRodW5rJztcblxuaW1wb3J0ICogYXMgbG9nIGZyb20gJy4uLy4uL2xvZ2dpbmcvbG9nJztcbmltcG9ydCB0eXBlIHsgTm9vcEFjdGlvblR5cGUgfSBmcm9tICcuL25vb3AnO1xuaW1wb3J0IHR5cGUgeyBTdGF0ZVR5cGUgYXMgUm9vdFN0YXRlVHlwZSB9IGZyb20gJy4uL3JlZHVjZXInO1xuaW1wb3J0IHR5cGUge1xuICBBdHRhY2htZW50RHJhZnRUeXBlLFxuICBJbk1lbW9yeUF0dGFjaG1lbnREcmFmdFR5cGUsXG59IGZyb20gJy4uLy4uL3R5cGVzL0F0dGFjaG1lbnQnO1xuaW1wb3J0IHR5cGUgeyBNZXNzYWdlQXR0cmlidXRlc1R5cGUgfSBmcm9tICcuLi8uLi9tb2RlbC10eXBlcy5kJztcbmltcG9ydCB0eXBlIHsgTGlua1ByZXZpZXdUeXBlIH0gZnJvbSAnLi4vLi4vdHlwZXMvbWVzc2FnZS9MaW5rUHJldmlld3MnO1xuaW1wb3J0IHsgYXNzaWduV2l0aE5vVW5uZWNlc3NhcnlBbGxvY2F0aW9uIH0gZnJvbSAnLi4vLi4vdXRpbC9hc3NpZ25XaXRoTm9Vbm5lY2Vzc2FyeUFsbG9jYXRpb24nO1xuaW1wb3J0IHR5cGUge1xuICBBZGRMaW5rUHJldmlld0FjdGlvblR5cGUsXG4gIFJlbW92ZUxpbmtQcmV2aWV3QWN0aW9uVHlwZSxcbn0gZnJvbSAnLi9saW5rUHJldmlld3MnO1xuaW1wb3J0IHtcbiAgQUREX1BSRVZJRVcgYXMgQUREX0xJTktfUFJFVklFVyxcbiAgUkVNT1ZFX1BSRVZJRVcgYXMgUkVNT1ZFX0xJTktfUFJFVklFVyxcbn0gZnJvbSAnLi9saW5rUHJldmlld3MnO1xuaW1wb3J0IHsgd3JpdGVEcmFmdEF0dGFjaG1lbnQgfSBmcm9tICcuLi8uLi91dGlsL3dyaXRlRHJhZnRBdHRhY2htZW50JztcbmltcG9ydCB7IGRlbGV0ZURyYWZ0QXR0YWNobWVudCB9IGZyb20gJy4uLy4uL3V0aWwvZGVsZXRlRHJhZnRBdHRhY2htZW50JztcbmltcG9ydCB7IHJlcGxhY2VJbmRleCB9IGZyb20gJy4uLy4uL3V0aWwvcmVwbGFjZUluZGV4JztcbmltcG9ydCB7IHJlc29sdmVEcmFmdEF0dGFjaG1lbnRPbkRpc2sgfSBmcm9tICcuLi8uLi91dGlsL3Jlc29sdmVEcmFmdEF0dGFjaG1lbnRPbkRpc2snO1xuaW1wb3J0IHR5cGUgeyBIYW5kbGVBdHRhY2htZW50c1Byb2Nlc3NpbmdBcmdzVHlwZSB9IGZyb20gJy4uLy4uL3V0aWwvaGFuZGxlQXR0YWNobWVudHNQcm9jZXNzaW5nJztcbmltcG9ydCB7IGhhbmRsZUF0dGFjaG1lbnRzUHJvY2Vzc2luZyB9IGZyb20gJy4uLy4uL3V0aWwvaGFuZGxlQXR0YWNobWVudHNQcm9jZXNzaW5nJztcbmltcG9ydCB7IExpbmtQcmV2aWV3U291cmNlVHlwZSB9IGZyb20gJy4uLy4uL3R5cGVzL0xpbmtQcmV2aWV3JztcblxuLy8gU3RhdGVcblxuZXhwb3J0IHR5cGUgQ29tcG9zZXJTdGF0ZVR5cGUgPSB7XG4gIGF0dGFjaG1lbnRzOiBSZWFkb25seUFycmF5PEF0dGFjaG1lbnREcmFmdFR5cGU+O1xuICBsaW5rUHJldmlld0xvYWRpbmc6IGJvb2xlYW47XG4gIGxpbmtQcmV2aWV3UmVzdWx0PzogTGlua1ByZXZpZXdUeXBlO1xuICBxdW90ZWRNZXNzYWdlPzogUGljazxNZXNzYWdlQXR0cmlidXRlc1R5cGUsICdjb252ZXJzYXRpb25JZCcgfCAncXVvdGUnPjtcbiAgc2hvdWxkU2VuZEhpZ2hRdWFsaXR5QXR0YWNobWVudHM6IGJvb2xlYW47XG59O1xuXG4vLyBBY3Rpb25zXG5cbmNvbnN0IEFERF9QRU5ESU5HX0FUVEFDSE1FTlQgPSAnY29tcG9zZXIvQUREX1BFTkRJTkdfQVRUQUNITUVOVCc7XG5jb25zdCBSRVBMQUNFX0FUVEFDSE1FTlRTID0gJ2NvbXBvc2VyL1JFUExBQ0VfQVRUQUNITUVOVFMnO1xuY29uc3QgUkVTRVRfQ09NUE9TRVIgPSAnY29tcG9zZXIvUkVTRVRfQ09NUE9TRVInO1xuY29uc3QgU0VUX0hJR0hfUVVBTElUWV9TRVRUSU5HID0gJ2NvbXBvc2VyL1NFVF9ISUdIX1FVQUxJVFlfU0VUVElORyc7XG5jb25zdCBTRVRfUVVPVEVEX01FU1NBR0UgPSAnY29tcG9zZXIvU0VUX1FVT1RFRF9NRVNTQUdFJztcblxudHlwZSBBZGRQZW5kaW5nQXR0YWNobWVudEFjdGlvblR5cGUgPSB7XG4gIHR5cGU6IHR5cGVvZiBBRERfUEVORElOR19BVFRBQ0hNRU5UO1xuICBwYXlsb2FkOiBBdHRhY2htZW50RHJhZnRUeXBlO1xufTtcblxudHlwZSBSZXBsYWNlQXR0YWNobWVudHNBY3Rpb25UeXBlID0ge1xuICB0eXBlOiB0eXBlb2YgUkVQTEFDRV9BVFRBQ0hNRU5UUztcbiAgcGF5bG9hZDogUmVhZG9ubHlBcnJheTxBdHRhY2htZW50RHJhZnRUeXBlPjtcbn07XG5cbnR5cGUgUmVzZXRDb21wb3NlckFjdGlvblR5cGUgPSB7XG4gIHR5cGU6IHR5cGVvZiBSRVNFVF9DT01QT1NFUjtcbn07XG5cbnR5cGUgU2V0SGlnaFF1YWxpdHlTZXR0aW5nQWN0aW9uVHlwZSA9IHtcbiAgdHlwZTogdHlwZW9mIFNFVF9ISUdIX1FVQUxJVFlfU0VUVElORztcbiAgcGF5bG9hZDogYm9vbGVhbjtcbn07XG5cbnR5cGUgU2V0UXVvdGVkTWVzc2FnZUFjdGlvblR5cGUgPSB7XG4gIHR5cGU6IHR5cGVvZiBTRVRfUVVPVEVEX01FU1NBR0U7XG4gIHBheWxvYWQ/OiBQaWNrPE1lc3NhZ2VBdHRyaWJ1dGVzVHlwZSwgJ2NvbnZlcnNhdGlvbklkJyB8ICdxdW90ZSc+O1xufTtcblxudHlwZSBDb21wb3NlckFjdGlvblR5cGUgPVxuICB8IEFkZExpbmtQcmV2aWV3QWN0aW9uVHlwZVxuICB8IEFkZFBlbmRpbmdBdHRhY2htZW50QWN0aW9uVHlwZVxuICB8IFJlbW92ZUxpbmtQcmV2aWV3QWN0aW9uVHlwZVxuICB8IFJlcGxhY2VBdHRhY2htZW50c0FjdGlvblR5cGVcbiAgfCBSZXNldENvbXBvc2VyQWN0aW9uVHlwZVxuICB8IFNldEhpZ2hRdWFsaXR5U2V0dGluZ0FjdGlvblR5cGVcbiAgfCBTZXRRdW90ZWRNZXNzYWdlQWN0aW9uVHlwZTtcblxuLy8gQWN0aW9uIENyZWF0b3JzXG5cbmV4cG9ydCBjb25zdCBhY3Rpb25zID0ge1xuICBhZGRBdHRhY2htZW50LFxuICBhZGRQZW5kaW5nQXR0YWNobWVudCxcbiAgcHJvY2Vzc0F0dGFjaG1lbnRzLFxuICByZW1vdmVBdHRhY2htZW50LFxuICByZXBsYWNlQXR0YWNobWVudHMsXG4gIHJlc2V0Q29tcG9zZXIsXG4gIHNldE1lZGlhUXVhbGl0eVNldHRpbmcsXG4gIHNldFF1b3RlZE1lc3NhZ2UsXG59O1xuXG4vLyBOb3QgY29vbCB0aGF0IHdlIGhhdmUgdG8gcHVsbCBmcm9tIENvbnZlcnNhdGlvbk1vZGVsIGhlcmVcbi8vIGJ1dCBpZiB0aGUgY3VycmVudCBzZWxlY3RlZCBjb252ZXJzYXRpb24gaXNuJ3QgdGhlIG9uZSB0aGF0IHdlJ3JlIG9wZXJhdGluZ1xuLy8gb24gdGhlbiB3ZSB3b24ndCBiZSBhYmxlIHRvIGdyYWIgYXR0YWNobWVudHMgZnJvbSBzdGF0ZSBzbyB3ZSByZXNvcnQgdG8gdGhlXG4vLyBuZXh0IGluLW1lbW9yeSBzdG9yZS5cbmZ1bmN0aW9uIGdldEF0dGFjaG1lbnRzRnJvbUNvbnZlcnNhdGlvbk1vZGVsKFxuICBjb252ZXJzYXRpb25JZDogc3RyaW5nXG4pOiBBcnJheTxBdHRhY2htZW50RHJhZnRUeXBlPiB7XG4gIGNvbnN0IGNvbnZlcnNhdGlvbiA9IHdpbmRvdy5Db252ZXJzYXRpb25Db250cm9sbGVyLmdldChjb252ZXJzYXRpb25JZCk7XG4gIHJldHVybiBjb252ZXJzYXRpb24/LmdldCgnZHJhZnRBdHRhY2htZW50cycpIHx8IFtdO1xufVxuXG5mdW5jdGlvbiBhZGRBdHRhY2htZW50KFxuICBjb252ZXJzYXRpb25JZDogc3RyaW5nLFxuICBhdHRhY2htZW50OiBJbk1lbW9yeUF0dGFjaG1lbnREcmFmdFR5cGVcbik6IFRodW5rQWN0aW9uPHZvaWQsIFJvb3RTdGF0ZVR5cGUsIHVua25vd24sIFJlcGxhY2VBdHRhY2htZW50c0FjdGlvblR5cGU+IHtcbiAgcmV0dXJuIGFzeW5jIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICAvLyBXZSBkbyBhc3luYyBvcGVyYXRpb25zIGZpcnN0IHNvIG11bHRpcGxlIGluLXByb2Nlc3MgYWRkQXR0YWNobWVudHMgZG9uJ3Qgc3RvbXAgb25cbiAgICAvLyAgIGVhY2ggb3RoZXIuXG4gICAgY29uc3Qgb25EaXNrID0gYXdhaXQgd3JpdGVEcmFmdEF0dGFjaG1lbnQoYXR0YWNobWVudCk7XG5cbiAgICBjb25zdCBpc1NlbGVjdGVkQ29udmVyc2F0aW9uID1cbiAgICAgIGdldFN0YXRlKCkuY29udmVyc2F0aW9ucy5zZWxlY3RlZENvbnZlcnNhdGlvbklkID09PSBjb252ZXJzYXRpb25JZDtcblxuICAgIGNvbnN0IGRyYWZ0QXR0YWNobWVudHMgPSBpc1NlbGVjdGVkQ29udmVyc2F0aW9uXG4gICAgICA/IGdldFN0YXRlKCkuY29tcG9zZXIuYXR0YWNobWVudHNcbiAgICAgIDogZ2V0QXR0YWNobWVudHNGcm9tQ29udmVyc2F0aW9uTW9kZWwoY29udmVyc2F0aW9uSWQpO1xuXG4gICAgLy8gV2UgZXhwZWN0IHRoZXJlIHRvIGVpdGhlciBiZSBhIHBlbmRpbmcgZHJhZnQgYXR0YWNobWVudCBvciBhbiBleGlzdGluZ1xuICAgIC8vIGF0dGFjaG1lbnQgdGhhdCB3ZSdsbCBiZSByZXBsYWNpbmcuXG4gICAgY29uc3QgaGFzRHJhZnRBdHRhY2htZW50UGVuZGluZyA9IGRyYWZ0QXR0YWNobWVudHMuc29tZShcbiAgICAgIGRyYWZ0QXR0YWNobWVudCA9PiBkcmFmdEF0dGFjaG1lbnQucGF0aCA9PT0gYXR0YWNobWVudC5wYXRoXG4gICAgKTtcblxuICAgIC8vIFVzZXIgaGFzIGNhbmNlbGVkIHRoZSBkcmFmdCBzbyB3ZSBkb24ndCBuZWVkIHRvIGNvbnRpbnVlIHByb2Nlc3NpbmdcbiAgICBpZiAoIWhhc0RyYWZ0QXR0YWNobWVudFBlbmRpbmcpIHtcbiAgICAgIGF3YWl0IGRlbGV0ZURyYWZ0QXR0YWNobWVudChvbkRpc2spO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSBhbnkgcGVuZGluZyBhdHRhY2htZW50cyB0aGF0IHdlcmUgdHJhbnNjb2RpbmdcbiAgICBjb25zdCBpbmRleCA9IGRyYWZ0QXR0YWNobWVudHMuZmluZEluZGV4KFxuICAgICAgZHJhZnRBdHRhY2htZW50ID0+IGRyYWZ0QXR0YWNobWVudC5wYXRoID09PSBhdHRhY2htZW50LnBhdGhcbiAgICApO1xuICAgIGxldCBuZXh0QXR0YWNobWVudHMgPSBkcmFmdEF0dGFjaG1lbnRzO1xuICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgIGxvZy53YXJuKFxuICAgICAgICBgYWRkQXR0YWNobWVudDogRmFpbGVkIHRvIGZpbmQgcGVuZGluZyBhdHRhY2htZW50IHdpdGggcGF0aCAke2F0dGFjaG1lbnQucGF0aH1gXG4gICAgICApO1xuICAgICAgbmV4dEF0dGFjaG1lbnRzID0gWy4uLmRyYWZ0QXR0YWNobWVudHMsIG9uRGlza107XG4gICAgfSBlbHNlIHtcbiAgICAgIG5leHRBdHRhY2htZW50cyA9IHJlcGxhY2VJbmRleChkcmFmdEF0dGFjaG1lbnRzLCBpbmRleCwgb25EaXNrKTtcbiAgICB9XG5cbiAgICByZXBsYWNlQXR0YWNobWVudHMoY29udmVyc2F0aW9uSWQsIG5leHRBdHRhY2htZW50cykoXG4gICAgICBkaXNwYXRjaCxcbiAgICAgIGdldFN0YXRlLFxuICAgICAgbnVsbFxuICAgICk7XG5cbiAgICBjb25zdCBjb252ZXJzYXRpb24gPSB3aW5kb3cuQ29udmVyc2F0aW9uQ29udHJvbGxlci5nZXQoY29udmVyc2F0aW9uSWQpO1xuICAgIGlmIChjb252ZXJzYXRpb24pIHtcbiAgICAgIGNvbnZlcnNhdGlvbi5hdHRyaWJ1dGVzLmRyYWZ0QXR0YWNobWVudHMgPSBuZXh0QXR0YWNobWVudHM7XG4gICAgICB3aW5kb3cuU2lnbmFsLkRhdGEudXBkYXRlQ29udmVyc2F0aW9uKGNvbnZlcnNhdGlvbi5hdHRyaWJ1dGVzKTtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGFkZFBlbmRpbmdBdHRhY2htZW50KFxuICBjb252ZXJzYXRpb25JZDogc3RyaW5nLFxuICBwZW5kaW5nQXR0YWNobWVudDogQXR0YWNobWVudERyYWZ0VHlwZVxuKTogVGh1bmtBY3Rpb248dm9pZCwgUm9vdFN0YXRlVHlwZSwgdW5rbm93biwgUmVwbGFjZUF0dGFjaG1lbnRzQWN0aW9uVHlwZT4ge1xuICByZXR1cm4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgIGNvbnN0IGlzU2VsZWN0ZWRDb252ZXJzYXRpb24gPVxuICAgICAgZ2V0U3RhdGUoKS5jb252ZXJzYXRpb25zLnNlbGVjdGVkQ29udmVyc2F0aW9uSWQgPT09IGNvbnZlcnNhdGlvbklkO1xuXG4gICAgY29uc3QgZHJhZnRBdHRhY2htZW50cyA9IGlzU2VsZWN0ZWRDb252ZXJzYXRpb25cbiAgICAgID8gZ2V0U3RhdGUoKS5jb21wb3Nlci5hdHRhY2htZW50c1xuICAgICAgOiBnZXRBdHRhY2htZW50c0Zyb21Db252ZXJzYXRpb25Nb2RlbChjb252ZXJzYXRpb25JZCk7XG5cbiAgICBjb25zdCBuZXh0QXR0YWNobWVudHMgPSBbLi4uZHJhZnRBdHRhY2htZW50cywgcGVuZGluZ0F0dGFjaG1lbnRdO1xuXG4gICAgZGlzcGF0Y2goe1xuICAgICAgdHlwZTogUkVQTEFDRV9BVFRBQ0hNRU5UUyxcbiAgICAgIHBheWxvYWQ6IG5leHRBdHRhY2htZW50cyxcbiAgICB9KTtcblxuICAgIGNvbnN0IGNvbnZlcnNhdGlvbiA9IHdpbmRvdy5Db252ZXJzYXRpb25Db250cm9sbGVyLmdldChjb252ZXJzYXRpb25JZCk7XG4gICAgaWYgKGNvbnZlcnNhdGlvbikge1xuICAgICAgY29udmVyc2F0aW9uLmF0dHJpYnV0ZXMuZHJhZnRBdHRhY2htZW50cyA9IG5leHRBdHRhY2htZW50cztcbiAgICAgIHdpbmRvdy5TaWduYWwuRGF0YS51cGRhdGVDb252ZXJzYXRpb24oY29udmVyc2F0aW9uLmF0dHJpYnV0ZXMpO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc0F0dGFjaG1lbnRzKFxuICBvcHRpb25zOiBIYW5kbGVBdHRhY2htZW50c1Byb2Nlc3NpbmdBcmdzVHlwZVxuKTogVGh1bmtBY3Rpb248dm9pZCwgUm9vdFN0YXRlVHlwZSwgdW5rbm93biwgTm9vcEFjdGlvblR5cGU+IHtcbiAgcmV0dXJuIGFzeW5jIGRpc3BhdGNoID0+IHtcbiAgICBhd2FpdCBoYW5kbGVBdHRhY2htZW50c1Byb2Nlc3Npbmcob3B0aW9ucyk7XG4gICAgZGlzcGF0Y2goe1xuICAgICAgdHlwZTogJ05PT1AnLFxuICAgICAgcGF5bG9hZDogbnVsbCxcbiAgICB9KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlQXR0YWNobWVudChcbiAgY29udmVyc2F0aW9uSWQ6IHN0cmluZyxcbiAgZmlsZVBhdGg6IHN0cmluZ1xuKTogVGh1bmtBY3Rpb248dm9pZCwgUm9vdFN0YXRlVHlwZSwgdW5rbm93biwgUmVwbGFjZUF0dGFjaG1lbnRzQWN0aW9uVHlwZT4ge1xuICByZXR1cm4gYXN5bmMgKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHsgYXR0YWNobWVudHMgfSA9IGdldFN0YXRlKCkuY29tcG9zZXI7XG5cbiAgICBjb25zdCBbdGFyZ2V0QXR0YWNobWVudF0gPSBhdHRhY2htZW50cy5maWx0ZXIoXG4gICAgICBhdHRhY2htZW50ID0+IGF0dGFjaG1lbnQucGF0aCA9PT0gZmlsZVBhdGhcbiAgICApO1xuICAgIGlmICghdGFyZ2V0QXR0YWNobWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5leHRBdHRhY2htZW50cyA9IGF0dGFjaG1lbnRzLmZpbHRlcihcbiAgICAgIGF0dGFjaG1lbnQgPT4gYXR0YWNobWVudC5wYXRoICE9PSBmaWxlUGF0aFxuICAgICk7XG5cbiAgICBjb25zdCBjb252ZXJzYXRpb24gPSB3aW5kb3cuQ29udmVyc2F0aW9uQ29udHJvbGxlci5nZXQoY29udmVyc2F0aW9uSWQpO1xuICAgIGlmIChjb252ZXJzYXRpb24pIHtcbiAgICAgIGNvbnZlcnNhdGlvbi5hdHRyaWJ1dGVzLmRyYWZ0QXR0YWNobWVudHMgPSBuZXh0QXR0YWNobWVudHM7XG4gICAgICBjb252ZXJzYXRpb24uYXR0cmlidXRlcy5kcmFmdENoYW5nZWQgPSB0cnVlO1xuICAgICAgd2luZG93LlNpZ25hbC5EYXRhLnVwZGF0ZUNvbnZlcnNhdGlvbihjb252ZXJzYXRpb24uYXR0cmlidXRlcyk7XG4gICAgfVxuXG4gICAgcmVwbGFjZUF0dGFjaG1lbnRzKGNvbnZlcnNhdGlvbklkLCBuZXh0QXR0YWNobWVudHMpKFxuICAgICAgZGlzcGF0Y2gsXG4gICAgICBnZXRTdGF0ZSxcbiAgICAgIG51bGxcbiAgICApO1xuXG4gICAgaWYgKFxuICAgICAgdGFyZ2V0QXR0YWNobWVudC5wYXRoICYmXG4gICAgICB0YXJnZXRBdHRhY2htZW50LmZpbGVOYW1lICE9PSB0YXJnZXRBdHRhY2htZW50LnBhdGhcbiAgICApIHtcbiAgICAgIGF3YWl0IGRlbGV0ZURyYWZ0QXR0YWNobWVudCh0YXJnZXRBdHRhY2htZW50KTtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIHJlcGxhY2VBdHRhY2htZW50cyhcbiAgY29udmVyc2F0aW9uSWQ6IHN0cmluZyxcbiAgYXR0YWNobWVudHM6IFJlYWRvbmx5QXJyYXk8QXR0YWNobWVudERyYWZ0VHlwZT5cbik6IFRodW5rQWN0aW9uPHZvaWQsIFJvb3RTdGF0ZVR5cGUsIHVua25vd24sIFJlcGxhY2VBdHRhY2htZW50c0FjdGlvblR5cGU+IHtcbiAgcmV0dXJuIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICAvLyBJZiB0aGUgY2FsbCBjYW1lIGZyb20gYSBjb252ZXJzYXRpb24gd2UgYXJlIG5vIGxvbmdlciBpbiB3ZSBkbyBub3RcbiAgICAvLyB1cGRhdGUgdGhlIHN0YXRlLlxuICAgIGlmIChnZXRTdGF0ZSgpLmNvbnZlcnNhdGlvbnMuc2VsZWN0ZWRDb252ZXJzYXRpb25JZCAhPT0gY29udmVyc2F0aW9uSWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBSRVBMQUNFX0FUVEFDSE1FTlRTLFxuICAgICAgcGF5bG9hZDogYXR0YWNobWVudHMubWFwKHJlc29sdmVEcmFmdEF0dGFjaG1lbnRPbkRpc2spLFxuICAgIH0pO1xuICB9O1xufVxuXG5mdW5jdGlvbiByZXNldENvbXBvc2VyKCk6IFJlc2V0Q29tcG9zZXJBY3Rpb25UeXBlIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBSRVNFVF9DT01QT1NFUixcbiAgfTtcbn1cblxuZnVuY3Rpb24gc2V0TWVkaWFRdWFsaXR5U2V0dGluZyhcbiAgcGF5bG9hZDogYm9vbGVhblxuKTogU2V0SGlnaFF1YWxpdHlTZXR0aW5nQWN0aW9uVHlwZSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogU0VUX0hJR0hfUVVBTElUWV9TRVRUSU5HLFxuICAgIHBheWxvYWQsXG4gIH07XG59XG5cbmZ1bmN0aW9uIHNldFF1b3RlZE1lc3NhZ2UoXG4gIHBheWxvYWQ/OiBQaWNrPE1lc3NhZ2VBdHRyaWJ1dGVzVHlwZSwgJ2NvbnZlcnNhdGlvbklkJyB8ICdxdW90ZSc+XG4pOiBTZXRRdW90ZWRNZXNzYWdlQWN0aW9uVHlwZSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogU0VUX1FVT1RFRF9NRVNTQUdFLFxuICAgIHBheWxvYWQsXG4gIH07XG59XG5cbi8vIFJlZHVjZXJcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEVtcHR5U3RhdGUoKTogQ29tcG9zZXJTdGF0ZVR5cGUge1xuICByZXR1cm4ge1xuICAgIGF0dGFjaG1lbnRzOiBbXSxcbiAgICBsaW5rUHJldmlld0xvYWRpbmc6IGZhbHNlLFxuICAgIHNob3VsZFNlbmRIaWdoUXVhbGl0eUF0dGFjaG1lbnRzOiBmYWxzZSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZXIoXG4gIHN0YXRlOiBSZWFkb25seTxDb21wb3NlclN0YXRlVHlwZT4gPSBnZXRFbXB0eVN0YXRlKCksXG4gIGFjdGlvbjogUmVhZG9ubHk8Q29tcG9zZXJBY3Rpb25UeXBlPlxuKTogQ29tcG9zZXJTdGF0ZVR5cGUge1xuICBpZiAoYWN0aW9uLnR5cGUgPT09IFJFU0VUX0NPTVBPU0VSKSB7XG4gICAgcmV0dXJuIGdldEVtcHR5U3RhdGUoKTtcbiAgfVxuXG4gIGlmIChhY3Rpb24udHlwZSA9PT0gUkVQTEFDRV9BVFRBQ0hNRU5UUykge1xuICAgIGNvbnN0IHsgcGF5bG9hZDogYXR0YWNobWVudHMgfSA9IGFjdGlvbjtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc3RhdGUsXG4gICAgICBhdHRhY2htZW50cyxcbiAgICAgIC4uLihhdHRhY2htZW50cy5sZW5ndGhcbiAgICAgICAgPyB7fVxuICAgICAgICA6IHsgc2hvdWxkU2VuZEhpZ2hRdWFsaXR5QXR0YWNobWVudHM6IGZhbHNlIH0pLFxuICAgIH07XG4gIH1cblxuICBpZiAoYWN0aW9uLnR5cGUgPT09IFNFVF9ISUdIX1FVQUxJVFlfU0VUVElORykge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5zdGF0ZSxcbiAgICAgIHNob3VsZFNlbmRIaWdoUXVhbGl0eUF0dGFjaG1lbnRzOiBhY3Rpb24ucGF5bG9hZCxcbiAgICB9O1xuICB9XG5cbiAgaWYgKGFjdGlvbi50eXBlID09PSBTRVRfUVVPVEVEX01FU1NBR0UpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc3RhdGUsXG4gICAgICBxdW90ZWRNZXNzYWdlOiBhY3Rpb24ucGF5bG9hZCxcbiAgICB9O1xuICB9XG5cbiAgaWYgKGFjdGlvbi50eXBlID09PSBBRERfTElOS19QUkVWSUVXKSB7XG4gICAgaWYgKGFjdGlvbi5wYXlsb2FkLnNvdXJjZSAhPT0gTGlua1ByZXZpZXdTb3VyY2VUeXBlLkNvbXBvc2VyKSB7XG4gICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnN0YXRlLFxuICAgICAgbGlua1ByZXZpZXdMb2FkaW5nOiB0cnVlLFxuICAgICAgbGlua1ByZXZpZXdSZXN1bHQ6IGFjdGlvbi5wYXlsb2FkLmxpbmtQcmV2aWV3LFxuICAgIH07XG4gIH1cblxuICBpZiAoYWN0aW9uLnR5cGUgPT09IFJFTU9WRV9MSU5LX1BSRVZJRVcpIHtcbiAgICByZXR1cm4gYXNzaWduV2l0aE5vVW5uZWNlc3NhcnlBbGxvY2F0aW9uKHN0YXRlLCB7XG4gICAgICBsaW5rUHJldmlld0xvYWRpbmc6IGZhbHNlLFxuICAgICAgbGlua1ByZXZpZXdSZXN1bHQ6IHVuZGVmaW5lZCxcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChhY3Rpb24udHlwZSA9PT0gQUREX1BFTkRJTkdfQVRUQUNITUVOVCkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5zdGF0ZSxcbiAgICAgIGF0dGFjaG1lbnRzOiBbLi4uc3RhdGUuYXR0YWNobWVudHMsIGFjdGlvbi5wYXlsb2FkXSxcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHN0YXRlO1xufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFLQSxVQUFxQjtBQVNyQiwrQ0FBa0Q7QUFLbEQsMEJBR087QUFDUCxrQ0FBcUM7QUFDckMsbUNBQXNDO0FBQ3RDLDBCQUE2QjtBQUM3QiwwQ0FBNkM7QUFFN0MseUNBQTRDO0FBQzVDLHlCQUFzQztBQWN0QyxNQUFNLHlC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
